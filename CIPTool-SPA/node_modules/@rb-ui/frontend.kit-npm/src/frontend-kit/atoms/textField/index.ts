import BaseComponent from '../../baseComponent';

const TOGGLE_ICON = '.a-text-field__icon';
const PASSWORD_VISIBLE_CLASS = `-password-visible`;

export default class TextField extends BaseComponent {
  protected static events = ['onClick'];

  private toggleIcon: HTMLElement;

  private input: HTMLElement;

  constructor(container: HTMLElement) {
    super(container);

    /**
     * Define DOM Elements and Variables
     */
    this.toggleIcon = container.querySelector(TOGGLE_ICON);
    this.input = container.querySelector('input');

    // register change event for the select
    if (this.toggleIcon instanceof HTMLElement) {
      this.toggleIcon.addEventListener('click', () => {
        const { input } = this;

        if (input.getAttribute('type') === 'password') {
          container.classList.add(PASSWORD_VISIBLE_CLASS);
          input.setAttribute('type', 'text');
        } else {
          container.classList.remove(PASSWORD_VISIBLE_CLASS);
          input.setAttribute('type', 'password');
        }
      });
    }
  }
}
