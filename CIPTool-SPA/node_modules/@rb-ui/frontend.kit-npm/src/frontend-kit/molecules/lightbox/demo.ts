import WindowWithFrontendKit from '../../WindowWithFrontendKit';

export default (): void => {
  const { boschFrontendKit } = (window as unknown) as WindowWithFrontendKit;

  // every button with the right class will show the "demo" modal on click
  const modalShowButtons = document.querySelectorAll('.frontend-kit-example_modal-lightbox');

  modalShowButtons.forEach(container => {
    const showTrigger = container.querySelector(
      '.a-button[data-frok-action="show"]',
    );

    const modalId = container.getAttribute('data-frok-show-lightbox');

    const modalElement = boschFrontendKit.Lightbox.findLightbox(modalId);

    const modal = modalElement.component;

    // close the modal when the background is clicked
    modal.addEventListener('backgroundClicked', () => modal.hide());

    if (showTrigger) {
      showTrigger.addEventListener('click', () =>
        boschFrontendKit.Lightbox.showLightbox(modalId),
      );
    }
  });
};
